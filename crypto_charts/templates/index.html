{% extends 'base.html' %}
{% block header %}
    {% block title %} {% endblock title %}
{% endblock header %}
{% block content %}
    <hr>
    <form name="get_coin" action="/" method="POST">
        <label> Para walutowa: </label>
        <input name="coin1" id="coin1" required>-<input name="coin2" id="coin2">
        <label> Giełda: </label>
        <select name="exchange">
            {% for exchange in exchanges_list %}
            <option value="{{ exchange }}">{{ exchange }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Wyszukaj">
    </form>
    <hr>
    {% block stats_chart %}
    {% for message in get_flashed_messages() %}
        <div class="flash">{{ message }}</div>
    {% endfor %}
    {% if request.method == 'POST' and params.data_code == '200000' %}
        <p> Para: {{ params['curr_pair'] }} </p>
        <p> Giełda: {{ params['exchange'] }} </p>
        <div id='chart' class='chart'></div>
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
        <script type='text/javascript'>
            var graphs = {{graphJSON | safe}};
            Plotly.plot('chart',graphs,{});
        </script>
    {% endif %}
    {% endblock stats_chart %}
{% endblock content %}
